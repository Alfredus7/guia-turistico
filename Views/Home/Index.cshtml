@model IEnumerable<guia_turistico.Models.Tipo>

@{
    ViewData["Title"] = "Inicio - Guía Turística";
    var selectedLanguage = Context.Request.Cookies["selectedLanguage"] ?? "es";
}

<!-- Encabezado -->
<header class="bg-light py-5 text-center">
    <div class="container">
        <h1 class="fw-bold">
            @switch (selectedLanguage)
            {
                case "en":
                    <text>Discover the Best Tourist Destinations</text>
                    ;
                    break;
                case "pt":
                    <text>Descubra os Melhores Destinos Turísticos</text>
                    ;
                    break;
                default:
                    <text>Descubre los mejores destinos turísticos</text>
                    ;
                    break;
            }
        </h1>
        <p class="lead text-muted">
            @switch (selectedLanguage)
            {
                case "en":
                    <text>Explore, learn and live unique experiences with our guide</text>
                    ;
                    break;
                case "pt":
                    <text>Explore, aprenda e viva experiências únicas com o nosso guia</text>
                    ;
                    break;
                default:
                    <text>Explora, aprende y vive experiencias únicas con nuestra guía</text>
                    ;
                    break;
            }
        </p>
    </div>
</header>

<!-- Sección de los 3 Sitios Mejor Puntuados -->
<div class="container my-5">
    <h2 class="text-center mb-4">
        @switch (selectedLanguage)
        {
            case "en":
                <text>🏆 Top Rated Sites by Visitors</text>
                ;
                break;
            case "pt":
                <text>🏆 Melhores Locais Avaliados</text>
                ;
                break;
            default:
                <text>🏆 Mejores Sitios Según Opiniones</text>
                ;
                break;
        }
    </h2>

    <div class="row g-4">
        @if (ViewBag.TopSitios != null && ViewBag.TopSitios.Count > 0)
        {
            foreach (var item in ViewBag.TopSitios)
            {
                var sitio = item.Sitio;
                var promedio = Math.Round((double)item.Promedio, 1);
                string imagen = item.ImagenUrl;

                <div class="col-12 col-md-4">
                    <div class="card h-100 shadow-sm border-0">
                        <div class="ratio ratio-4x3">
                            <img src="@imagen"
                                 class="card-img-top img-fluid object-fit-cover rounded-top"
                                 alt="@sitio.Nombre"
                                 onerror="this.src='/images/default-sitio.jpg';">
                        </div>

                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>@(string.IsNullOrEmpty(sitio.NombreIngles) ? sitio.Nombre : sitio.NombreIngles)</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>@(string.IsNullOrEmpty(sitio.NombrePortugues) ? sitio.Nombre : sitio.NombrePortugues)</text>
                                        ;
                                        break;
                                    default:
                                        <text>@sitio.Nombre</text>
                                        ;
                                        break;
                                }
                            </h5>
                            <p class="card-text text-muted mb-2">⭐ @promedio / 5</p>
                            <p class="card-text">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>@((sitio.DescripcionIngles?.Length > 100 ? sitio.DescripcionIngles.Substring(0, 100) + "..." : sitio.DescripcionIngles) ?? sitio.Descripcion)</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>@((sitio.DescripcionPortugues?.Length > 100 ? sitio.DescripcionPortugues.Substring(0, 100) + "..." : sitio.DescripcionPortugues) ?? sitio.Descripcion)</text>
                                        ;
                                        break;
                                    default:
                                        <text>@(sitio.Descripcion?.Length > 100 ? sitio.Descripcion.Substring(0, 100) + "..." : sitio.Descripcion)</text>
                                        ;
                                        break;
                                }
                            </p>
                            <a asp-controller="SitioTuristicoes" asp-action="Details" asp-route-id="@sitio.Id"
                               class="btn btn-outline-primary mt-auto">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>View Details</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>Ver Detalhes</text>
                                        ;
                                        break;
                                    default:
                                        <text>Ver Detalles</text>
                                        ;
                                        break;
                                }
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="text-center text-muted">
                <p>
                    @switch (selectedLanguage)
                    {
                        case "en":
                            <text>No rated sites yet.</text>
                            ;
                            break;
                        case "pt":
                            <text>Ainda não há locais avaliados.</text>
                            ;
                            break;
                        default:
                            <text>No hay sitios puntuados aún.</text>
                            ;
                            break;
                    }
                </p>
            </div>
        }
    </div>
</div>

<!-- Sección de Tipos de Tours -->
<div class="container my-5">
    <h2 class="text-center mb-4">
        @switch (selectedLanguage)
        {
            case "en":
                <text>Tour Types and Experiences</text>
                ;
                break;
            case "pt":
                <text>Tipos de Tours e Experiências</text>
                ;
                break;
            default:
                <text>Tipos de Tours y Experiencias</text>
                ;
                break;
        }
    </h2>
    <div class="row g-4">
        @if (Model != null && Model.Any())
        {
            foreach (var tipo in Model)
            {
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card h-100 shadow-sm">
                        <div class="ratio ratio-4x3">
                            <img src="@tipo.ImagenUrl"
                                 class="card-img-top img-fluid object-fit-cover rounded-top"
                                 alt="@tipo.Nombre"
                                 onerror="this.src='/images/default-tipo.jpg';">
                        </div>

                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>@(string.IsNullOrEmpty(tipo.NombreIngles) ? tipo.Nombre : tipo.NombreIngles)</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>@(string.IsNullOrEmpty(tipo.NombrePortugues) ? tipo.Nombre : tipo.NombrePortugues)</text>
                                        ;
                                        break;
                                    default:
                                        <text>@tipo.Nombre</text>
                                        ;
                                        break;
                                }
                            </h5>
                            <p class="card-text">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>@(tipo.DescripcionIngles ?? tipo.Descripcion)</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>@(tipo.DescripcionPortugues ?? tipo.Descripcion)</text>
                                        ;
                                        break;
                                    default:
                                        <text>@tipo.Descripcion</text>
                                        ;
                                        break;
                                }
                            </p>
                            <a asp-controller="SitioTuristicoes"
                               asp-action="PorTipo"
                               asp-route-tipoId="@tipo.TipoId"
                               class="btn btn-primary mt-auto">
                                @switch (selectedLanguage)
                                {
                                    case "en":
                                        <text>View Sites</text>
                                        ;
                                        break;
                                    case "pt":
                                        <text>Ver Locais</text>
                                        ;
                                        break;
                                    default:
                                        <text>Ver Sitios</text>
                                        ;
                                        break;
                                }
                            </a>

                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="text-center text-muted">
                <p>
                    @switch (selectedLanguage)
                    {
                        case "en":
                            <text>No tours registered yet.</text>
                            ;
                            break;
                        case "pt":
                            <text>Nenhum tipo de tour registrado ainda.</text>
                            ;
                            break;
                        default:
                            <text>No hay tipos de tours registrados todavía.</text>
                            ;
                            break;
                    }
                </p>
            </div>
        }
    </div>
</div>
